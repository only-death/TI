# 토픽: Webpack

## Q. 빌드 시간이 오래 걸릴 때 어떻게 최적화하나요?

## 주요 키워드

- **캐싱 (Caching)**: 이전 빌드 결과를 저장하여 재사용하는 기법
- **병렬 처리 (Parallel Processing)**: 여러 작업을 동시에 실행하여 시간 단축
- **번들 분석 (Bundle Analysis)**: webpack-bundle-analyzer로 번들 크기와 구성 분석
- **DLL Plugin**: 자주 변경되지 않는 라이브러리를 미리 번들링하는 플러그인
- **Tree Shaking**: 사용하지 않는 코드를 제거하는 최적화 기법
- **Code Splitting**: 번들을 여러 청크로 나누어 필요할 때만 로드
- **Source Map**: 디버깅을 위한 원본 소스 매핑 정보
- **Hot Module Replacement (HMR)**: 전체 페이지 새로고침 없이 모듈만 교체

## Script

웹팩 빌드 시간 최적화는 크게 **캐싱**, **병렬 처리**, **불필요한 작업 제거**의 세 가지 관점에서 접근할 수 있습니다.

**첫 번째로 캐싱 활용입니다.** 웹팩5에서는 `cache: { type: 'filesystem' }`을 설정하여 파일시스템 레벨에서 캐싱할 수 있고, babel-loader에는 `cacheDirectory: true`를 설정하여 트랜스파일 결과를 캐싱합니다. 이렇게 하면 변경되지 않은 파일들은 다시 처리하지 않아 빌드 시간이 크게 단축됩니다.

**두 번째는 병렬 처리입니다.** thread-loader를 사용하면 CPU 집약적인 작업들을 여러 워커에서 병렬로 처리할 수 있고, TerserPlugin의 parallel 옵션으로 압축 작업도 병렬화할 수 있습니다.

**세 번째로 불필요한 작업을 제거합니다.** node_modules를 exclude 처리하고, 개발 환경에서는 소스맵을 `eval-cheap-module-source-map`으로 설정하여 생성 시간을 줄입니다. 또한 resolve.modules를 명시적으로 설정하여 모듈 검색 시간을 단축할 수 있습니다.

**추가적으로 DLL Plugin을 활용하면** React, lodash 같은 자주 변경되지 않는 vendor 라이브러리들을 미리 번들링해두어 매번 빌드할 필요가 없어집니다.

이런 최적화들을 단계적으로 적용하면서 webpack-bundle-analyzer로 효과를 측정하는 것이 중요합니다.

## 더 공부할 내용

1. Webpack 5의 Module Federation과 빌드 최적화
2. Vite, esbuild 같은 차세대 번들러와의 성능 비교
3. CI/CD 환경에서의 빌드 캐싱 전략 (Docker layer caching, GitHub Actions cache)
4. Micro-frontend 아키텍처에서의 빌드 최적화 방법
5. 번들 사이즈와 빌드 시간의 트레이드오프 분석
6. 개발팀 규모별 빌드 파이프라인 설계 방법
7. 모노레포 환경에서의 증분 빌드 (Incremental Build) 구현

---

### 정리

**캐싱 활용**

- `cache: { type: 'filesystem' }`로 파일시스템 캐싱 활성화
- `babel-loader`에서 `cacheDirectory: true` 설정

**병렬 처리**

- `thread-loader` 사용으로 멀티스레드 처리
- `terser-webpack-plugin`의 `parallel` 옵션 활용

**불필요한 처리 제거**

- `exclude: /node_modules/`로 외부 라이브러리 제외
- `resolve.modules`에서 검색 경로 최적화
- 소스맵 생성 최소화 (`devtool: 'eval-cheap-module-source-map'`)

**DLL 플러그인**

- 자주 변경되지 않는 vendor 라이브러리들을 미리 번들링
