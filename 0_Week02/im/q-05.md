# 토픽: Webpack

## Q. 개발 환경과 프로덕션 환경의 웹팩 설정 차이는?

## 주요 키워드

- 개발 환경 (Development Environment): 개발자가 코드를 작성하고 테스트하는 환경
- 프로덕션 환경 (Production Environment): 실제 사용자에게 서비스되는 운영 환경
- 소스맵 (Source Map): 압축된 코드를 원본 코드와 연결해주는 파일로 디버깅을 도움
- 핫 모듈 교체 (Hot Module Replacement, HMR): 페이지 새로고침 없이 모듈을 실시간으로 교체하는 기능
- 개발 서버 (Dev Server): 개발 중 파일 변경을 감지하고 자동으로 브라우저를 새로고침하는 서버
- 최적화 (Optimization): 코드 압축, 최소화 등을 통해 성능을 향상시키는 과정
- 빌드 속도 (Build Speed): 웹팩이 번들을 생성하는데 걸리는 시간
- 캐싱 (Caching): 변경되지 않은 파일을 재사용하여 빌드 시간을 단축하는 기법

## Script

개발 환경과 프로덕션 환경의 웹팩 설정은 각각의 목적에 따라 크게 다릅니다.

**개발 환경**에서는 개발 효율성과 디버깅 편의성에 초점을 맞춥니다. 소스맵을 'eval-source-map'이나 'cheap-module-source-map'으로 설정하여 디버깅을 쉽게 하고, 핫 모듈 교체를 활성화하여 코드 변경 시 즉시 반영되도록 합니다. 또한 개발 서버를 통해 파일 변경을 감지하고 자동으로 브라우저를 새로고침합니다. 빌드 속도를 위해 최적화는 최소한으로 하며, 코드 압축이나 최소화는 하지 않습니다.

반면 **프로덕션 환경**에서는 성능과 최적화에 집중합니다. 소스맵은 보안을 위해 제거하거나 'source-map'으로 설정하여 별도 파일로 분리합니다. TerserPlugin을 사용한 코드 최소화, CSS 압축, 이미지 최적화 등 모든 최적화 옵션을 활성화합니다. 또한 트리 쉐이킹과 코드 분할을 통해 번들 크기를 최소화하고, 파일명에 해시를 추가하여 브라우저 캐싱을 최적화합니다.

설정 관리 측면에서는 webpack.common.js, webpack.dev.js, webpack.prod.js로 나누어 공통 설정과 환경별 설정을 분리하고, webpack-merge를 사용하여 설정을 결합하는 것이 일반적입니다.

## 더 공부할 내용

1. webpack-merge를 활용한 설정 파일 분리 및 관리 전략
2. 다양한 소스맵 옵션의 특징과 성능 비교
3. 개발 서버의 프록시 설정과 CORS 문제 해결 방법
4. 프로덕션 환경에서의 환경 변수 관리 및 보안 고려사항
5. 캐싱 전략과 파일 해싱을 통한 브라우저 캐시 최적화
6. Docker를 활용한 개발/프로덕션 환경 일관성 유지 방법
7. CI/CD 파이프라인에서의 웹팩 빌드 최적화 방법

---

### 정리

**개발 환경**

- `mode: 'development'`
- 빠른 빌드를 위한 `devtool: 'eval-cheap-module-source-map'`
- HMR(Hot Module Replacement) 활성화
- 최적화 비활성화로 빌드 속도 우선

**프로덕션 환경**

- `mode: 'production'`
- 코드 압축 및 최적화 (TerserPlugin)
- 트리 쉐이킹 활성화
- CSS 추출 (MiniCssExtractPlugin)
- 파일명에 해시 추가로 캐싱 최적화

```javascript
// 환경별 설정 분리 예시
const config = {
  development: {
    devtool: "eval-cheap-module-source-map",
    plugins: [new webpack.HotModuleReplacementPlugin()],
  },
  production: {
    optimization: {
      minimize: true,
      splitChunks: { chunks: "all" },
    },
  },
};
```
