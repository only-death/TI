# 토픽: http, 프로토콜, 네트워크

[블로그 정리](https://yoolllog.tistory.com/49)

## Q. DNS lookup이 느릴 때 TTFB가 증가하는 이유를 설명해 보세요.

TTFB(Time To First Byte)는 브라우저가 URL을 요청한 순간부터 첫 바이트를 받기까지 흐른 총 시간을 잰다. 요청을 보내려면 먼저 대상 서버의 IP를 알아야 하므로, 로컬·브라우저·OS 캐시에 없을 때는 DNS lookup이 필수 전처리 단계가 된다.

1. 브라우저 → OS → 재귀 리졸버 → 루트·TLD·권한 네임서버를 거쳐 여러 RTT가 발생

2. 이 과정이 끝나야 TCP 3-way handshake, 이어서 TLS handshake(HTTPS라면), HTTP 요청 전송이 차례로 진행

3. TTFB 타이머는 DNS 응답을 기다리는 동안에도 계속 증가한다

즉 DNS가 느리면 연결·암호화·서버 처리가 시작되기 전부터 대기 시간이 누적되어 TTFB가 선형적으로 길어진다. 

반대로 DNS가 캐시에 있어 해석 시간이 0 ms에 수렴하면 같은 서버라도 TTFB가 크게 단축된다. 그래서 TTFB는 “서버-응답 속도만 측정”하는 지표가 아니라, 네임 해석 지연까지 포함한 클라이언트-시점 전체 스타트업 지연을 나타내며, DNS가 병목이면 그대로 상승한다.

---

### 꼬리질문

#### Q. 전역 사용자 대상 서비스에서 CDN을 사용하면 LCP가 개선되는 원리를 설명해 보세요.

#### Q. 103 Early Hints를 이용해 CSS·폰트 등의 Critical Request Chain을 단축하는 방법을 간단히 제안해 보세요.
