# 토픽: http, 프로토콜, 네트워크

[블로그 정리](https://yoolllog.tistory.com/49)

## Q. HTTP GET과 POST가 멱등성·캐싱 측면에서 어떻게 다른지 설명해 보세요.

### HTTP 기본 틀

- 자원(Resource) : URI로 식별되는 대상

- 표현(Representation) : 자원의 현재 상태를 담은 메시지 바디

- 메서드(Method) : 자원에 수행할 동작을 선언(GET·POST·PUT 등)

### 멱등성(Idempotency)과 안전성(Safety)

| 구분     | 안전성(읽기 전용) | 멱등성(반복해도 결과 동일) |
| -------- | ----------------- | -------------------------- |
| **GET**  | O                 | O                          |
| **POST** | X                 | X(사양상)                  |

| 구분          | GET                                                              | POST                                                                                                                 |
| ------------- | ---------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------- |
| **의미**      | 자원 **조회만** 수행 → 같은 요청을 여러 번 보내도 서버 상태 불변 | 주로 **자원 생성·변경** → 같은 요청을 여러 번 보내면 **중복 생성·변경** 위험                                         |
| **HTTP 규격** | RFC 9110에서 “멱등 + 안전(safe)” 메서드로 정의                   | 멱등 아님(필요하면 `PUT / DELETE` 사용)                                                                              |
| **실전**      | 로드밸런서 재시도·브라우저 자동 재전송 시 안심                   | 네트워크 재전송이 **부작용** 만들 수 있으므로 클라이언트가 재시도 시 `Retry-Token`·트랜잭션 키 등을 사용해 중복 방지 |

GET은 “읽기 전용”이므로 같은 요청을 100 번 보내도 서버·DB에 부작용이 없다. 그래서 브라우저나 로드밸런서가 네트워크 오류를 감지하면 자동 재시도해도 안전하다.

POST는 주로 생성·변경을 뜻하므로 한 번 더 전송되면 주문이 두 번 들어가거나 글이 두 번 저장될 수 있다. 실무에서는 Idempotency-Key·트랜잭션 토큰 등으로 중복을 막는다.

멱등하면서 상태를 바꾸고 싶을 땐 PUT(전체 교체)·PATCH(부분 수정)·DELETE(삭제) 를 쓰는 것이 HTTP 설계 철학에 맞다.

### 캐싱(Cacheability)

HTTP 캐시는 “메서드+URL+선택적 헤더”를 키로 응답을 저장했다가 같은 요청이 오면 네트워크를 생략한다.

| 구분     | 기본 캐시 정책                                                                                               | 실무 활용                                                                                       |
| -------- | ------------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------- |
| **GET**  | 캐시 *가능*이 기본값. `Cache-Control`, `ETag`, `Last-Modified`로 갱신 여부 결정                              | 정적 파일, 조회 전용 API, 이미지 CDN 등에서 광범위하게 사용                                     |
| **POST** | 캐시 *불가*가 기본. RFC 9111 § 4.2.1에 따라 `Cache-Control: public`·`Content-Location` 등 명시해야 캐시 가능 | 드물지만 “검색 결과가 너무 길다” 같은 이유로 POST+캐시를 쓰기도 함 (서버·CDN이 명시적으로 허용) |

**GET → 읽기 전용·멱등·캐시 친화적.
POST → 상태 변경·비멱등·캐시 금지(명시적 허용 시 예외).
이 구분은 브라우저의 자동 재시도·프록시 캐시·CDN 설계 모든 층에서 전제 조건으로 작동한다.**

---

### 꼬리질문

#### Q. HTTP/1.1의 **keep-alive**가 없는 경우와 있을 때의 성능 차이를 RTT 관점에서 비교해 보세요.

#### Q. HTTP/2가 멀티플렉싱으로 Head-of-Line 블로킹을 완화하는 흐름을 간단히 정리해 보세요.
