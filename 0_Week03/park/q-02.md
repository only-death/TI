# 토픽: http, 프로토콜, 네트워크

## Q. 브라우저 캐시(Cache)는 어떻게 동작하나요?

### 브라우저 캐시(Cache)란?

브라우저 캐시는 **웹 브라우저가 이미지, CSS, JS, HTML 등의 정적 자원(static assets)** 을 로컬 디스크(=캐시 저장소)에 저장해두었다가 같은 리소스를 재요청할 때 서버에 재다운로드하지 않고, 저장된 데이터를 재사용하는 기능입니다.

#### 동작 흐름

1. 사용자가 웹 페이지를 처음 요청하면,

2. 브라우저는 서버로부터 리소스(HTML, CSS, JS 등)를 받아와 로컬에 캐싱함.

3. 이후 동일한 URL을 다시 요청할 경우,

4. 브라우저는 서버에 요청을 보내지 않거나, 서버에 변경 여부만 확인한 후,

5. 변경 사항이 없으면 캐시된 리소스를 그대로 사용함.

### 캐시 방식 종류

| 캐시 방식                        | 설명                                                                               | 예시 헤더                                |
| -------------------------------- | ---------------------------------------------------------------------------------- | ---------------------------------------- |
| **Strong Cache (강력한 캐시)**   | 브라우저가 서버에 요청하지 않고 캐시된 파일을 그대로 사용함                        | `Cache-Control: max-age=3600`, `Expires` |
| **Validation Cache (검증 캐시)** | 브라우저가 서버에 요청을 보내고, 파일이 변경되었는지 확인한 후 캐시 유지 여부 결정 | `ETag`, `Last-Modified`                  |

### 주요 HTTP 헤더들

| 헤더                | 의미                                                 |
| ------------------- | ---------------------------------------------------- |
| `Cache-Control`     | 캐시 정책을 지정 (`max-age`, `no-cache`, `no-store`) |
| `Expires`           | 리소스 만료 시간 (HTTP/1.0)                          |
| `ETag`              | 리소스의 고유 식별자, 변경 여부 판단                 |
| `Last-Modified`     | 리소스가 마지막으로 수정된 날짜                      |
| `If-None-Match`     | ETag와 비교하여 변경되었는지 확인                    |
| `If-Modified-Since` | Last-Modified와 비교                                 |

### 실무에서 자주 쓰는 전략

- `Cache-Control: public, max-age=31536000, immutable`  
  → 빌드된 JS, CSS 파일에 적용 (변경 거의 없음, 해시 붙임)

- `Cache-Control: no-cache`  
  → HTML 파일에 적용 (항상 최신 데이터 필요)

## 정리

> 브라우저 캐시는 브라우저가 HTML, CSS, JS와 같은 정적 자원을 로컬 디스크에 저장해두었다가, 같은 리소스를 다시 요청할 때 서버와의 통신을 줄이고 빠르게 로딩하기 위해 사용하는 기능입니다.
>
> 크게 **강력한 캐시(Strong Cache)**와 검증 캐시(Validation Cache) 두 가지 방식이 있습니다.
> 강력한 캐시는 Cache-Control이나 Expires 헤더를 통해 유효 기간이 정해지며, 그 안에서는 서버 요청 없이 브라우저가 바로 캐시를 사용합니다.
> 검증 캐시는 ETag나 Last-Modified 헤더를 사용해 서버에 변경 여부를 확인한 후, 변경이 없으면 기존 캐시를 그대로 사용하고, 변경되었을 경우 새로운 데이터를 받아옵니다.
>
> 실제 개발에서는 max-age, ETag, immutable 등의 헤더를 설정해 캐시 전략을 조절하고, 빌드 시 파일명에 해시 값을 붙여 변경 감지를 하기도 합니다.
