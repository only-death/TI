## Q3. TCP와 UDP의 차이점과 각각 언제 사용하는 것이 적절한가요?

### 주요 키워드

- **연결 지향 (Connection-oriented)**: 통신 전 연결을 설정하는 방식
- **비연결 지향 (Connectionless)**: 연결 설정 없이 바로 데이터 전송하는 방식
- **신뢰성 (Reliability)**: 데이터 전송의 정확성과 순서 보장
- **흐름 제어 (Flow Control)**: 수신자의 처리 능력에 맞춰 전송 속도 조절
- **혼잡 제어 (Congestion Control)**: 네트워크 상황에 따른 전송량 조절
- **3-way Handshake**: TCP 연결 설정 과정
- **체크섬 (Checksum)**: 데이터 무결성 검증을 위한 값
- **오버헤드 (Overhead)**: 프로토콜 동작을 위해 필요한 추가 비용

### Script

TCP와 UDP의 가장 근본적인 차이는 **신뢰성과 성능의 트레이드오프**입니다.

**TCP는 연결 지향 프로토콜**로, 3-way handshake를 통해 연결을 설정한 후 데이터를 전송합니다. 순서 보장, 중복 제거, 오류 검출 및 재전송 기능을 제공하여 데이터의 정확한 전달을 보장합니다. 또한 흐름 제어와 혼잡 제어를 통해 네트워크 상황에 적응적으로 대응합니다.

**반면 UDP는 비연결 지향 프로토콜**로, 연결 설정 없이 바로 데이터를 전송합니다. 기본적인 체크섬 외에는 별다른 신뢰성 보장 기능이 없어 데이터 손실이나 순서 바뀜이 발생할 수 있지만, 그만큼 오버헤드가 적고 전송 속도가 빠릅니다.

**TCP를 사용하는 경우**는 데이터의 정확성이 중요한 웹 브라우징(HTTP/HTTPS), 이메일(SMTP), 파일 전송(FTP), 원격 접속(SSH) 등입니다. 웹 페이지나 파일이 일부분이라도 손실되면 안 되기 때문입니다.

**UDP를 사용하는 경우**는 실시간성이 중요하고 일부 데이터 손실을 허용할 수 있는 동영상 스트리밍, 온라인 게임, DNS 조회, 라이브 방송 등입니다. 이런 애플리케이션들은 늦게 도착하는 데이터보다는 빠른 전송이 더 중요합니다.

**최근에는 QUIC 프로토콜**처럼 UDP 기반에서 애플리케이션 레벨에서 신뢰성을 구현하는 방식도 등장하고 있습니다.

---

## TCP와 UDP 차이점

### 🔍 예상 꼬리 질문들

### Q3-1. "TCP의 3-way handshake 과정을 구체적으로 설명해주세요"

**전문가 답변**:
TCP 연결 설정을 위한 **3단계 협상 과정**입니다.

**1단계 - SYN**: 클라이언트가 서버에게 연결 요청

- 클라이언트가 `SYN=1, seq=x` 패킷 전송
- "연결하고 싶습니다. 제 시퀀스 번호는 x부터 시작합니다"

**2단계 - SYN+ACK**: 서버가 요청을 수락하고 자신도 연결 요청

- 서버가 `SYN=1, ACK=1, seq=y, ack=x+1` 패킷 전송
- "연결 수락합니다. 제 시퀀스는 y부터, 당신의 다음 번호는 x+1을 기다립니다"

**3단계 - ACK**: 클라이언트가 서버의 응답을 확인

- 클라이언트가 `ACK=1, seq=x+1, ack=y+1` 패킷 전송
- "확인했습니다. 이제 데이터 전송 시작하겠습니다"

이렇게 **양방향으로 시퀀스 번호를 동기화**하여 신뢰성 있는 통신 기반을 마련합니다.

---

### Q3-2. "TCP의 흐름제어와 혼잡제어의 차이점은 무엇인가요?"

**전문가 답변**:
**제어 대상과 목적**이 다릅니다.

**흐름제어 (Flow Control)**:

- **수신자 중심**: 수신자의 버퍼 오버플로우 방지
- **Sliding Window 기법**: 수신자가 윈도우 크기로 받을 수 있는 데이터양 알림
- 수신자가 `rwnd(receiver window)` 값으로 송신 속도 조절
- **점대점 문제**: 송신자 ↔ 수신자 간 직접적인 제어

**혼잡제어 (Congestion Control)**:

- **네트워크 중심**: 네트워크 전체의 혼잡 방지
- **cwnd(congestion window)** 기반으로 전송량 조절
- **Slow Start → Congestion Avoidance → Fast Recovery** 알고리즘
- **전체 네트워크 문제**: 라우터, 스위치 등 중간 장비의 혼잡 상황 고려

실제 전송창 크기는 `min(rwnd, cwnd)`로 결정됩니다.

---

### Q3-3. "DNS는 왜 TCP가 아닌 UDP를 사용하나요?"

**전문가 답변**:
**응답 속도와 오버헤드** 때문입니다.

**UDP를 사용하는 이유**:

- **빠른 조회**: 3-way handshake 없이 바로 질의/응답
- **낮은 오버헤드**: TCP 헤더(20바이트) vs UDP 헤더(8바이트)
- **단순한 요청-응답**: 대부분 1회성 질의로 연결 유지 불필요
- **상태 비저장**: DNS 서버에서 연결 상태 관리 부담 없음

**하지만 TCP도 사용되는 경우**:

- **Zone Transfer**: DNS 서버 간 대용량 데이터 동기화
- **응답 크기 > 512바이트**: DNSSEC, IPv6 레코드 등으로 응답이 클 때
- **신뢰성 필요**: 중요한 DNS 업데이트나 관리 작업

**최근 동향**:

- **DNS over HTTPS (DoH)**, **DNS over TLS (DoT)**: 보안을 위해 TCP/TLS 기반 사용
- 하지만 일반적인 DNS 조회는 여전히 UDP가 주류
