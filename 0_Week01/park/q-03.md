## â˜‘ async awaitì„ ì‚¬ìš©í•´ì£¼ê¸° ìœ„í•´ babelì˜ ì–´ë–¤ ê²ƒì„ ì„¤ì •í•´ì¤˜ì•¼ í•˜ëŠ”ì§€ ì•„ì‹œë‚˜ìš”?

> Babelì´ë€?
>
> Babelì€ ìµœì‹  JavaScript ë¬¸ë²•(ES6+)ì„ êµ¬í˜• ë¸Œë¼ìš°ì €ì—ì„œë„ ë™ì‘í•˜ë„ë¡ ë³€í™˜(transpile)í•´ì£¼ëŠ” ë„êµ¬ì…ë‹ˆë‹¤.

### Babelì´ ì™œ í•„ìš”í•œê°€

```js
const greet = async () => {
  const res = await fetch('/api/hello');
  const data = await res.json();
  console.log(data);
};
```

ì´ ì½”ë“œëŠ” ìµœì‹  ë¸Œë¼ìš°ì €ì—ì„œëŠ” ì˜ ëŒì•„ê°
í•˜ì§€ë§Œ IE11, êµ¬í˜• Android ë¸Œë¼ìš°ì €, ì¼ë¶€ ê¸°ì—… ë‚´ë¶€ í™˜ê²½ì—ì„œëŠ” async, await, arrow function, const ê°™ì€ ë¬¸ë²•ì„ ëª¨ë¦…ë‹ˆë‹¤ â†’ ì‹¤í–‰ ë¶ˆê°€!

ğŸ‘‰ ê·¸ë˜ì„œ **ìµœì‹  ë¬¸ë²•ì„ êµ¬í˜• JSë¡œ ë³€í™˜í•´ì£¼ëŠ” ê²Œ** Babelì˜ ì—­í• ì…ë‹ˆë‹¤.

### ğŸ› ï¸ í•„ìš”í•œ Babel ì„¤ì • ìš”ì•½

1. í•„ìˆ˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜

```bash
npm install --save-dev @babel/core @babel/preset-env @babel/plugin-transform-runtime
npm install --save @babel/runtime
```

2. babel.config.js ë˜ëŠ” .babelrc ì„¤ì • ì˜ˆì‹œ

```js
// babel.config.js
module.exports = {
  presets: [
    [
      '@babel/preset-env',
      {
        targets: '> 0.25%, not dead', // ì§€ì›í•  ë¸Œë¼ìš°ì € ë²”ìœ„
        useBuiltIns: 'usage', // í•„ìš”í•œ polyfillë§Œ ì¶”ê°€
        corejs: 3,
      },
    ],
  ],
  plugins: ['@babel/plugin-transform-runtime'],
};
```

### í•µì‹¬ ì„¤ëª…

| ì„¤ì • í•­ëª©                         | ì—­í•                                                              |
| --------------------------------- | ---------------------------------------------------------------- |
| `@babel/preset-env`               | ìµœì‹  JS ë¬¸ë²• â†’ êµ¬ë¬¸ ë³€í™˜                                         |
| `@babel/plugin-transform-runtime` | `async/await` â†’ ì œë„ˆë ˆì´í„° ë³€í™˜ + `regeneratorRuntime` ìë™ ì£¼ì… |
| `@babel/runtime`                  | ëŸ°íƒ€ì„ì—ì„œ í•„ìš”í•œ í—¬í¼ í•¨ìˆ˜/í´ë¦¬í•„ ì œê³µ                          |
| `core-js`                         | í•„ìš”í•œ polyfillë§Œ ìë™ìœ¼ë¡œ ì‚½ì… (`useBuiltIns: 'usage'`)         |

### ğŸ’¥ ì™œ `regeneratorRuntime is not defined` ì—ëŸ¬ê°€ ë‚ ê¹Œ?

```text
ReferenceError: regeneratorRuntime is not defined
```

- ì´ ì—ëŸ¬ëŠ” Babelì´ `async/await`ì„ **ì œë„ˆë ˆì´í„° í•¨ìˆ˜ë¡œ íŠ¸ëœìŠ¤íŒŒì¼**í–ˆëŠ”ë°,
- ê·¸ê±¸ ì‹¤í–‰í•˜ë ¤ë©´ `regeneratorRuntime`ì´ í•„ìš”í•œë°,
- ê·¸ê²ƒì´ ìë™ìœ¼ë¡œ **importë˜ì§€ ì•Šì•„ì„œ ìƒê¸°ëŠ” ì—ëŸ¬**ì…ë‹ˆë‹¤.

â¡ ì´ê±¸ í•´ê²°í•˜ëŠ” ê²Œ ë°”ë¡œ `@babel/plugin-transform-runtime` + `@babel/runtime` ì¡°í•©ì…ë‹ˆë‹¤.

### ğŸ’¯ ì •ë¦¬

`async/await` ë¬¸ë²•ì„ êµ¬í˜• ë¸Œë¼ìš°ì €ì—ì„œë„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” Babelì—ì„œ **`@babel/plugin-transform-runtime`** í”ŒëŸ¬ê·¸ì¸ê³¼ **`@babel/preset-env`** ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.
íŠ¹íˆ ë¹„ë™ê¸° ì½”ë“œë¥¼ ì œë„ˆë ˆì´í„°(generator) ê¸°ë°˜ìœ¼ë¡œ íŠ¸ëœìŠ¤íŒŒì¼í•˜ê¸° ë•Œë¬¸ì—, ë‚´ë¶€ì ìœ¼ë¡œëŠ” `regeneratorRuntime`ì´ í•„ìš”í•˜ë©°, ì´ ë¶€ë¶„ì„ **`@babel/runtime` íŒ¨í‚¤ì§€ë¥¼ í†µí•´ ìë™ìœ¼ë¡œ ì²˜ë¦¬**í•´ì¤ë‹ˆë‹¤.
