# 왜 index를 key로 사용하면 안 되는지 설명해주세요.

## 주요 키워드

- key prop: 리스트 아이템의 고유 식별자로 사용되는 React 속성
- index key: 배열의 인덱스를 key로 사용하는 방식
- Reconciliation: React의 가상 DOM 비교 알고리즘
- 컴포넌트 상태 (Component State): 컴포넌트의 내부 데이터
- 리스트 렌더링 (List Rendering): 배열 데이터를 컴포넌트로 변환하는 과정

## Script

React에서 리스트 렌더링 시 key는 각 요소를 고유하게 식별해서 효율적으로 업데이트하기 위해 꼭 필요한 속성입니다. 그런데 key로 배열의 index를 사용하는 것은 권장되지 않습니다.

가장 큰 이유는 배열의 요소가 추가, 삭제, 혹은 순서 변경이 일어날 때 index 값이 함께 바뀌기 때문입니다. 예를 들어, 리스트의 중간에 새로운 항목이 추가되면 기존 항목들의 index가 모두 밀려서 변경됩니다. 이 경우 React는 key 값이 바뀌었다고 판단해서 해당 요소들을 모두 새로 렌더링하게 되고, 불필요한 DOM 업데이트가 발생해 성능 저하로 이어질 수 있습니다.

또한, 각 항목에 입력 필드나 내부 상태가 있을 때 index를 key로 사용하면, 리스트가 변경될 때 컴포넌트의 state가 올바르게 유지되지 않고 초기화되는 문제가 발생할 수 있습니다. React는 key가 바뀌면 해당 컴포넌트를 완전히 새로운 것으로 인식하기 때문입니다.

따라서 key는 변하지 않는 고유한 값을 사용하는 것이 가장 좋으며, 데이터베이스의 id나 고유 식별자를 활용하는 것이 바람직합니다. index는 요소의 순서가 절대 변하지 않는 정적 리스트에서만 예외적으로 사용할 수 있지만, 일반적으로는 피하는 것이 좋다고 생각합니다.

## 더 공부할 내용

1. React의 Reconciliation 과정에서 key의 역할
2. 고유한 key 생성 전략 (UUID, nanoid 등)
3. 리스트 렌더링 최적화 기법
4. React의 내부 구현에서 key 처리 방식
5. 대규모 리스트에서의 성능 최적화 방법
