# 브라우저의 동작 원리

## 브라우저의 주요 구성 요소

브라우저는 웹 페이지를 요청하고, 렌더링하고, 사용자와 상호작용하는 복잡한 소프트웨어입니다. <br>
브라우저의 핵심 구성 요소는 다음과 같습니다.

1. **사용자 인터페이스 (UI)**: 주소창, 뒤로가기 버튼, 북마크, 설정 메뉴 등.
2. **브라우저 엔진**: UI와 렌더링 엔진을 연결하는 중간 관리자.
3. **렌더링 엔진**: HTML, CSS를 해석하여 화면에 표시하는 역할.
4. **자바스크립트 엔진**: JavaScript 코드를 실행하는 모듈.
5. **네트워크 모듈**: HTTP 요청을 보내고 서버 응답을 처리하는 역할.
6. **데이터 저장소**: 쿠키, 캐시, 세션 스토리지 등 웹 데이터를 저장하는 공간.

## 브라우저의 렌더링 과정

브라우저가 웹 페이지를 화면에 표시하는 과정은 다음과 같이 진행됩니다.

### 1. 네트워크 요청 및 응답 처리
- 사용자가 URL을 입력하면 브라우저는 DNS를 통해 IP 주소를 찾고 HTTP 요청을 보냅니다.
- 서버가 HTML 문서를 응답하면 브라우저는 이를 다운로드합니다.

### 2. HTML 파싱 및 DOM 생성
- HTML 문서를 읽고 **DOM(Document Object Model) 트리**를 생성합니다.
- DOM은 HTML 요소들을 계층 구조로 나타낸 객체 모델입니다.
- `<script>` 태그를 만나면 JavaScript가 실행되며, 이 과정에서 DOM이 변경될 수 있습니다.

### 3. CSS 파싱 및 CSSOM 생성
- CSS 파일을 다운로드하고 분석하여 **CSSOM(CSS Object Model) 트리**를 만듭니다.
- CSSOM은 CSS 규칙을 객체 형태로 표현한 구조입니다.

### 4. 렌더 트리(Render Tree) 생성
- **DOM과 CSSOM을 결합하여 렌더 트리(Render Tree)를 생성**합니다.
- `display: none` 속성이 적용된 요소는 렌더 트리에 포함되지 않습니다.

### 5. 레이아웃(Layout) 단계
- 각 요소의 크기와 위치를 계산하는 과정입니다.
- 뷰포트 크기와 상대적인 단위(px, %, em 등)를 고려하여 절대값으로 변환됩니다.

### 6. 페인팅(Painting) 단계
- 요소들의 색상, 글꼴, 배경 등을 실제 픽셀로 변환하여 화면에 그립니다.

### 7. 합성(Compositing) 단계
- 렌더 트리를 여러 개의 레이어로 나누고, GPU를 활용해 최종적으로 화면에 표시합니다.

## 브라우저의 JavaScript 실행 과정

1. **JavaScript 엔진이 실행되면, 코드를 해석하고 실행합니다.**
2. **JavaScript는 단일 스레드로 동작하므로, 하나의 작업이 끝나야 다음 작업이 실행됩니다.**
3. **비동기 처리 (이벤트 루프, 콜백 큐, 프로미스)를 통해 성능을 향상시킵니다.**

## 브라우저의 주요 최적화 기법

1. **렌더링 차단 최소화**: CSS는 `<head>`에 배치하고, JavaScript는 `async` 또는 `defer`를 사용하여 HTML 파싱을 차단하지 않도록 합니다.
2. **레이아웃 변경 최소화**: `transform`과 `opacity`를 활용하여 리플로우를 방지합니다.
3. **이미지 최적화**: `lazy loading`을 적용하여 필요할 때 이미지를 로드합니다.
4. **코드 스플리팅**: 필요한 JavaScript 코드만 로드하여 초기 로딩 시간을 줄입니다.

## 결론

브라우저의 동작 원리를 이해하면 웹 애플리케이션의 성능을 최적화할 수 있습니다. 특히, 렌더링 과정과 JavaScript 실행 방식에 대한 깊은 이해는 보다 빠르고 효율적인 웹 사이트를 구축하는 데 필수적입니다.


